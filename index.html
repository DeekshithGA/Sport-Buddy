<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sports Buddy</title>
  <link rel="stylesheet" href="styles/main.css" />
</head>
<body>
  <header>
    <h1>Sports Buddy</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="register.html">Register</a>
      <a href="login.html">Login</a>
      <a href="dashboard.html" id="dashboardLink" style="display:none;">Dashboard</a>
    </nav>
  </header>
  <main>
    <h2>Connect with local sports events and buddies</h2>
    <section id="featuredSports"></section>
  </main>

  <script src="scripts/firebase-config.js"></script>
  <script src="scripts/auth.js"></script>
  <script src="scripts/sports.js"></script>
  <script src="scripts/logger.js"></script>
  <script src="scripts/ui.js"></script>
  <div id="userGreeting"></div>
<button id="darkModeToggle">Toggle Dark Mode</button>

<section id="recentSportsPreview"></section>

<script>
  auth.onAuthStateChanged(user => {
    const greeting = document.getElementById('userGreeting');
    if (user) {
      greeting.textContent = `Welcome back, ${user.email}`;
    } else {
      greeting.textContent = '';
    }
  });

  // Dark mode toggle
  document.getElementById('darkModeToggle').addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
  });

  // Real-time recent sports preview
  sportsCollection.orderBy('createdAt', 'desc').limit(3).onSnapshot(snapshot => {
    const container = document.getElementById('recentSportsPreview');
    container.innerHTML = "<h3>Recent Sports Events</h3>";
    snapshot.forEach(doc => {
      const sport = doc.data();
      container.innerHTML += `<p>${sport.name} in ${sport.city} at ${new Date(sport.dateTime).toLocaleString()}</p>`;
    });
  });
</script>

</body>
</html>
